<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浅析webpack源码之前言（一） | 个人主页</title>
    <meta name="description" content="一个互联网全才妹子，会设计，会前端，会后端，还会视频动效，好像并没有什么卵用。。。。。。。">
    
    
    <link rel="preload" href="/blog/assets/css/styles.b8f6f876.css" as="style"><link rel="preload" href="/blog/assets/js/app.b8f6f876.js" as="script"><link rel="preload" href="/blog/assets/js/26.762d7fbf.js" as="script"><link rel="prefetch" href="/blog/assets/css/1.styles.8e8fe409.css"><link rel="prefetch" href="/blog/assets/css/2.styles.a2bd3099.css"><link rel="prefetch" href="/blog/assets/js/1.8e8fe409.js"><link rel="prefetch" href="/blog/assets/js/10.619c7997.js"><link rel="prefetch" href="/blog/assets/js/11.9c3e970b.js"><link rel="prefetch" href="/blog/assets/js/12.531cd467.js"><link rel="prefetch" href="/blog/assets/js/13.7e326423.js"><link rel="prefetch" href="/blog/assets/js/14.f3b097e0.js"><link rel="prefetch" href="/blog/assets/js/15.6a2e75f0.js"><link rel="prefetch" href="/blog/assets/js/16.c206d890.js"><link rel="prefetch" href="/blog/assets/js/17.cff55b68.js"><link rel="prefetch" href="/blog/assets/js/18.cbfbf9aa.js"><link rel="prefetch" href="/blog/assets/js/19.96969ef1.js"><link rel="prefetch" href="/blog/assets/js/2.a2bd3099.js"><link rel="prefetch" href="/blog/assets/js/20.357307bb.js"><link rel="prefetch" href="/blog/assets/js/21.69c3455f.js"><link rel="prefetch" href="/blog/assets/js/22.4efd32d6.js"><link rel="prefetch" href="/blog/assets/js/23.f297491c.js"><link rel="prefetch" href="/blog/assets/js/24.cc9b4c20.js"><link rel="prefetch" href="/blog/assets/js/25.ee8d1b0e.js"><link rel="prefetch" href="/blog/assets/js/27.3a122b7f.js"><link rel="prefetch" href="/blog/assets/js/28.2175adc1.js"><link rel="prefetch" href="/blog/assets/js/29.ebb9d56c.js"><link rel="prefetch" href="/blog/assets/js/3.7e0f7a9a.js"><link rel="prefetch" href="/blog/assets/js/30.73a02a6b.js"><link rel="prefetch" href="/blog/assets/js/31.1eae61bd.js"><link rel="prefetch" href="/blog/assets/js/32.c07b58b2.js"><link rel="prefetch" href="/blog/assets/js/33.397eaa54.js"><link rel="prefetch" href="/blog/assets/js/34.51ce988a.js"><link rel="prefetch" href="/blog/assets/js/35.58456503.js"><link rel="prefetch" href="/blog/assets/js/36.608991b7.js"><link rel="prefetch" href="/blog/assets/js/4.66ec0ecb.js"><link rel="prefetch" href="/blog/assets/js/5.38cc5d58.js"><link rel="prefetch" href="/blog/assets/js/6.ce65520e.js"><link rel="prefetch" href="/blog/assets/js/7.705c84c4.js"><link rel="prefetch" href="/blog/assets/js/8.95f0bebe.js"><link rel="prefetch" href="/blog/assets/js/9.291ac53a.js">
    <link rel="stylesheet" href="/blog/assets/css/1.styles.8e8fe409.css"><link rel="stylesheet" href="/blog/assets/css/2.styles.a2bd3099.css"><link rel="stylesheet" href="/blog/assets/css/styles.b8f6f876.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">个人主页</span></a> <div class="links" style="max-width:nullpx;"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/blog/home/" class="nav-link">vue源码解读</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link router-link-exact-active router-link-active">webpack源码解读</a></div><div class="nav-item"><a href="/blog/node/" class="nav-link">koa源码解析</a></div><div class="nav-item"><a href="/blog/base/" class="nav-link">JS基础</a></div><div class="nav-item"><a href="/blog/source/" class="nav-link">其他</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/interview/" class="nav-link">面试题</a></li><li class="dropdown-item"><!----> <a href="/blog/essay/" class="nav-link">随想</a></li><li class="dropdown-item"><!----> <a href="https://saintgirl.zcool.com.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  设计
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Carrie999" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/blog/home/" class="nav-link">vue源码解读</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link router-link-exact-active router-link-active">webpack源码解读</a></div><div class="nav-item"><a href="/blog/node/" class="nav-link">koa源码解析</a></div><div class="nav-item"><a href="/blog/base/" class="nav-link">JS基础</a></div><div class="nav-item"><a href="/blog/source/" class="nav-link">其他</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/interview/" class="nav-link">面试题</a></li><li class="dropdown-item"><!----> <a href="/blog/essay/" class="nav-link">随想</a></li><li class="dropdown-item"><!----> <a href="https://saintgirl.zcool.com.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  设计
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Carrie999" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>webpack源码系列解析</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/webpack/" class="active sidebar-link">浅析webpack源码之前言（一）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#为什么读webpack源码" class="sidebar-link">为什么读webpack源码</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#为什么写webpack源码系列文章博客" class="sidebar-link">为什么写webpack源码系列文章博客</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#看这个你能学到什么" class="sidebar-link">看这个你能学到什么</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#如何读webpack" class="sidebar-link">如何读webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#准备" class="sidebar-link">准备</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#当你npm-run-build-发生了什么？" class="sidebar-link">当你npm run build 发生了什么？</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#log大法" class="sidebar-link">log大法</a></li></ul></li></ul></li><li><a href="/blog/webpack/webpack2.html" class="sidebar-link">浅析webpack源码之convert-argv模块（二）</a></li><li><a href="/blog/webpack/webpack3.html" class="sidebar-link">浅析webpack源码之processOptions处理Options以及入口函数（三）</a></li><li><a href="/blog/webpack/webpack4.html" class="sidebar-link">浅析webpack源码之入口函数webpack.js详解（四）</a></li><li><a href="/blog/webpack/webpack5.html" class="sidebar-link">浅析webpack源码之Tapable粗解（五）</a></li><li><a href="/blog/webpack/webpack6.html" class="sidebar-link">浅析webpack源码之NodeEnvironmentPlugin模块总览（六）</a></li><li><a href="/blog/webpack/webpack6.1.html" class="sidebar-link">浅析webpack源码之CachedInputFileSystem模块(六)(1)</a></li><li><a href="/blog/webpack/webpack7.html" class="sidebar-link">浅析webpack源码之WebpackOptionsApply 模块(七)</a></li><li><a href="/blog/webpack/webpack8.html" class="sidebar-link">浅析webpack源码之Compiler.js模块(八)</a></li><li><a href="/blog/webpack/webpack9.html" class="sidebar-link">浅析webpack源码之Compiler.js模块(八)</a></li><li><a href="/blog/webpack/webpack10.html" class="sidebar-link">浅析webpack源码之Stat.js粗解(十)</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="浅析webpack源码之前言（一）"><a href="#浅析webpack源码之前言（一）" aria-hidden="true" class="header-anchor">#</a> 浅析webpack源码之前言（一）</h1> <h2 id="为什么读webpack源码"><a href="#为什么读webpack源码" aria-hidden="true" class="header-anchor">#</a> 为什么读webpack源码</h2> <ul><li>因为前端框架离不开webpack，天天都在用的东西啊，怎能不研究</li> <li>读源码能学到很多做项目看书学不到的东西，比如说架构，构造函数，es6很边缘的用法，甚至给函数命名也会潜移默化的影响等</li> <li>想写源码，不看源码怎么行，虽然现在还不知道写什么，就算不写什么，看看别人写的总可以吧</li> <li>知道世界的广阔，那么多插件，那么多软件开发师，他们在做什么，同样是写js的，怎么他们能这么伟大</li> <li>好奇心</li></ul> <p>本以为用框架以及用熟练后，到达了一个美丽的小湖泊，读源码发现原来还有一望无际的海洋，壮丽的雪山，浩淼的星辰。</p> <p>读webpack对面试也没什么用（刷leetcode，面试题更有用），你说你看webpack学会了啥，一时半会也说不清楚，但就是想看，想就去做，只要不危害他人</p> <h2 id="为什么写webpack源码系列文章博客"><a href="#为什么写webpack源码系列文章博客" aria-hidden="true" class="header-anchor">#</a> 为什么写webpack源码系列文章博客</h2> <ul><li>我可以只读不写的，这样还读的更快，只是后面想起了，不知道读了啥，读vue的时候好多都没有记录，但是即便那样当我再次看到那个函数我知道那是做什么</li> <li>给公司写的项目代码，如果项目被砍，感觉白写了一样</li> <li>为了证明自己的存在，证明自己来过</li> <li>如果通过看这个文章你能能学到丝毫的知识，是我之幸✌️</li></ul> <h2 id="看这个你能学到什么"><a href="#看这个你能学到什么" aria-hidden="true" class="header-anchor">#</a> 看这个你能学到什么</h2> <p>如果你想知道webpack的算法实现
<br>我建议你看这个<a href="https://github.com/lihongxun945/diving-into-webpack" target="_blank" rel="noopener noreferrer">git地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <br>虽然写的不够好，但是已经是我能找到的中写的最好的
<br>里面更多记录了怎么跟踪的过程
<br>你能学到如何调试以及阅读源码
<br>知道webpack页面架构
<br>webpack哪些模块实现了什么功能</p> <h2 id="如何读webpack"><a href="#如何读webpack" aria-hidden="true" class="header-anchor">#</a> 如何读webpack</h2> <h3 id="准备"><a href="#准备" aria-hidden="true" class="header-anchor">#</a> 准备</h3> <p>自己用webpack搭建一个项目,甚至是现成的读webpack都可以</p> <h3 id="当你npm-run-build-发生了什么？"><a href="#当你npm-run-build-发生了什么？" aria-hidden="true" class="header-anchor">#</a> 当你npm run build 发生了什么？</h3> <p><br>参考npm的<a href="https://docs.npmjs.com/cli/run-script#description" target="_blank" rel="noopener noreferrer">run-script文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <br>npm run会自动添加node_module/.bin 到当前命令所用的PATH变量中，
因此，npm run build 会执行package.json配置的build，目前我配置的是webpack，
实际会调用 node_modules/.bin/webpack
打开项目找到node_modules/.bin/webpack，需要点耐心，需要翻很多
webpack是一个符号连接
指到了webpack/bin/webpack.js</p> <h3 id="log大法"><a href="#log大法" aria-hidden="true" class="header-anchor">#</a> log大法</h3> <p>第一行是</p> <div class="language- extra-class"><pre class="language-text"><code>#!/usr/bin/env node
</code></pre></div><p>它被称为 Shebang。</p> <p>/usr/bin/env 不是一个路径，而是一个命令，
后面跟node 参数，就会找到node并调用它。</p> <div class="language- extra-class"><pre class="language-text"><code>$ /usr/bin/env node --version
v10.11.0
</code></pre></div><p>log 调试</p> <p><a href="https://github.com/visionmedia/debug" target="_blank" rel="noopener noreferrer">颜色log DEGUB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>用这个打印log会区分颜色，事实上我用着，也没那么好用</p> <p>顺便讲一下吧</p> <p>安装</p> <div class="language- extra-class"><pre class="language-text"><code>npm i -D debug
</code></pre></div><p>在要调试的文件中
定义</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'debug'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'debug-webpack webpack webpack.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你想打印的'</span><span class="token punctuation">)</span>
</code></pre></div><p>请把react-beauty-highcharts替换成你的文件名，这样才会有log</p> <div class="language- extra-class"><pre class="language-text"><code>DEBUG=react-beauty-highcharts* npm run build
</code></pre></div><p>这个有个缺点就是如果json比较大，每一行都会打印一遍debug-webpack webpack webpack.js名字，不好复制,还是console.log() 好使</p> <p>我们打开文件，里面主要处理了一些安装的逻辑
没安装包报错之类的
找到</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> cliPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>pkgPath<span class="token punctuation">)</span><span class="token punctuation">,</span> pkg<span class="token punctuation">.</span>bin<span class="token punctuation">[</span>installedClis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>binName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 引入了路径看到打印了路径是node_modules/webpack-cli/bin/cli.js</span>
<span class="token function">require</span><span class="token punctuation">(</span>cliPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>接下来打开webpack-cli/bin/cli.js</p> <p>241行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> options<span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
	options <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./convert-argv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p>我们分析convert-argv模块</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/21/2019, 12:26:28 PM</span></div></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/webpack/webpack2.html">
          浅析webpack源码之convert-argv模块（二）
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/26.762d7fbf.js" defer></script><script src="/blog/assets/js/app.b8f6f876.js" defer></script>
  </body>
</html>
